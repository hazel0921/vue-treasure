import{_ as P,o as T,r as C,a as w,c as E,b as n,d as _,e as L,w as V,f as A}from"./index-fddeef8a.js";const N={class:"game-wrapper"},S={class:"card"},H={class:"map",id:"map"},$={width:"340",height:"400",style:{position:"absolute",top:"12px",left:"12px","pointer-events":"none",overflow:"visible"}},q={__name:"GameView",setup(G){return T(()=>{const g=document.querySelector(".map svg"),a=document.getElementById("path"),c=document.getElementById("map"),f=a.getTotalLength(),B=document.getElementById("stars");for(let e=0;e<80;e++){const t=document.createElement("div");t.className="star",t.style.position="absolute",t.style.width="2px",t.style.height="2px",t.style.background="white",t.style.borderRadius="50%",t.style.top=Math.random()*100+"%",t.style.left=Math.random()*100+"%",t.style.opacity=.8,t.style.animation="twinkle 3s infinite ease-in-out",t.style.animationDelay=Math.random()*3+"s",B.appendChild(t)}const p=document.getElementById("log"),M=document.getElementById("progress"),b=document.getElementById("icon");function u(e){return new Promise(t=>setTimeout(t,e))}function s(e,t=""){const l=document.createElement("div");l.className="event "+t,l.innerHTML=`<div class="bubble"><span>🔎</span></div><div><div class="status">${e}</div></div>`,p.appendChild(l),p.scrollTop=p.scrollHeight}function o(e){M.style.width=Math.max(0,Math.min(100,e))+"%"}function h(e){const t=g.createSVGPoint();t.x=e.x,t.y=e.y;const l=g.getScreenCTM(),v=t.matrixTransform(l),d=c.getBoundingClientRect();return{x:v.x-d.left,y:v.y-d.top}}function m(e,t){const l=a.getPointAtLength(f*e),v=h(l),d=document.createElement("div");d.className="mapIcon",d.textContent=t,d.style.left=`${v.x}px`,d.style.top=`${v.y}px`,c.appendChild(d)}let i=0,r=0,y=!1;function I(e){r=e,y||(y=!0,requestAnimationFrame(x))}function x(){i+=(r-i)*.08,Math.abs(r-i)<5e-4&&(i=r);const e=a.getPointAtLength(f*i),t=h(e);b.style.transform=`translate(${t.x}px, ${t.y}px)`,Math.abs(r-i)>5e-4?requestAnimationFrame(x):y=!1}async function k(){p.innerHTML="",o(0),I(0);try{s("🌌 任务开始：踏入图书馆..."),o(10),await u(600),m(.2,"📜"),s("👴 遇见智者，进行交易..."),o(40),await u(600),m(.45,"👴"),s("🏛️ 进入神庙，继续探索..."),o(70),await u(800),m(.7,"🏛️"),s("🌊 潜入海底洞穴..."),o(90),await u(800),m(.85,"🌊"),s("💎 找到宝藏！"),o(100),m(1,"💎")}catch(e){s("❌ 任务失败："+e.message,"fail")}}document.getElementById("startBtn").addEventListener("click",()=>k()),document.getElementById("resetBtn").addEventListener("click",()=>{p.innerHTML="",o(0),i=0,r=0,b.style.transform="translate(0,0)",c.querySelectorAll(".mapIcon").forEach(e=>e.remove()),s("已重置")}),document.getElementById("guardProb").addEventListener("input",e=>{document.getElementById("guardProbVal").innerText=e.target.value}),s("页面就绪 — 点击“开始寻宝”以运行流程")}),(g,a)=>{const c=C("router-link");return w(),E("div",N,[a[6]||(a[6]=n("div",{class:"stars",id:"stars"},null,-1)),n("div",S,[a[3]||(a[3]=n("header",null,[n("h1",null,"寻宝动画"),n("div",{class:"controls"},[n("button",{id:"startBtn"},"开始寻宝"),n("button",{id:"resetBtn",class:"secondary"},"重置"),n("button",{id:"downloadBtn",class:"secondary"},"下载 HTML")])],-1)),n("main",null,[a[2]||(a[2]=_('<section class="stage" data-v-325d1325><div class="log" id="log" data-v-325d1325></div><div class="progressWrap" aria-hidden data-v-325d1325><div class="progress" id="progress" data-v-325d1325></div></div><div style="margin-top:12px;font-size:14px;" data-v-325d1325><label data-v-325d1325>守卫出现概率: <input id="guardProb" type="range" min="0" max="1" step="0.05" value="0.25" data-v-325d1325><span id="guardProbVal" data-v-325d1325>0.25</span></label><br data-v-325d1325><label data-v-325d1325><input type="checkbox" id="allowDive" checked data-v-325d1325> 允许潜水探索海底洞穴</label><br data-v-325d1325><label data-v-325d1325><input type="checkbox" id="preferRiddle" data-v-325d1325> 优先选择解谜而非交易</label></div></section>',1)),n("aside",H,[(w(),E("svg",$,[...a[0]||(a[0]=[n("path",{id:"path",d:"M30,30 C150,80 220,50 220,160 S300,260 300,370",stroke:"rgba(0,200,255,0.3)",fill:"none","stroke-width":"2","stroke-dasharray":"4 4"},null,-1)])])),a[1]||(a[1]=_('<div class="animIcon" id="icon" data-v-325d1325>🧭</div><div class="scene" id="scene1" data-v-325d1325></div><div class="scene" id="scene2" data-v-325d1325></div><div class="scene" id="scene3" data-v-325d1325></div><div class="legend" data-v-325d1325> 场景：图书馆 → 神庙 → 宝箱<br data-v-325d1325> （新增情节：谜题、守卫、海底洞穴、智者交易） </div>',5))])]),a[4]||(a[4]=n("footer",null,"关键节点会出现额外图标动画 ✨",-1))]),L(c,{to:"/",class:"btn-back"},{default:V(()=>[...a[5]||(a[5]=[A("🏠 返回首页",-1)])]),_:1})])}}},D=P(q,[["__scopeId","data-v-325d1325"]]);export{D as default};
